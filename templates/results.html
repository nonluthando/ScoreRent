{% extends "base.html" %}
{% block content %}

<h2>Evaluation result</h2>

<div class="stack">

  <div class="scoreBox">
    <div class="scoreTitle">Match score</div>
    <div class="score">{{ evaluation.score }}</div>
    <div class="verdict">{{ evaluation.verdict.replace("_", " ").title() }}</div>
    <div class="muted">Confidence: {{ evaluation.confidence }}</div>
  </div>

  <div class="card">
    <h3>Why this result</h3>
    <ul>
      {% for r in reasons %}
        <li>{{ r }}</li>
      {% endfor %}
    </ul>
  </div>

  <div class="card">
    <h3>What you should do next</h3>

    <p><strong>{{ actions[0] }}</strong></p>

    {% if actions|length > 1 %}
      <ul>
        {% for a in actions[1:] %}
          <li>{{ a }}</li>
        {% endfor %}
      </ul>
    {% endif %}
  </div>

  {% if listing.breakdown %}
  <details class="card">
    <summary>How this score was calculated</summary>
    <ul>
      {% for b in listing.breakdown %}
        <li>
          <strong>{{ b.title }}</strong>
          {% if b.details %} – {{ b.details }}{% endif %}
          ({{ b.before }} → {{ b.after }})
        </li>
      {% endfor %}
    </ul>
  </details>
  {% endif %}

  <div class="actions">
    <a class="btn" href="/evaluate">Evaluate another</a>
    <a class="btn secondary" href="/history">View history</a>
  </div>

</div>
{% endblock %}
